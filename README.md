# DRF-apps-test
Тестовое задание


## Задача
реализовать API, позволяющее добавлять, изменять, просматривать и удалять данные в модели "Приложения".
"Приложения" – это модель, которая хранит в себе внешние источники, которые будут обращаться к API. Обязательные поля модели: ID, Название приложения, Ключ API. Поле "Ключ API" нельзя менять через API напрямую, должен быть метод, позволяющий создать новый ключ API.
После добавления приложения – должна быть возможность использовать "Ключ API" созданного приложения для осуществления запросов к метод /api/test, метод должен возвращать JSON, содержащий всю информацию о приложении.


### Технологии
+ Django 2.2.7
+ Django REST framework


## Зависимости проекта

* docker v19.03.8
* docker-compose v1.25.5

## Deploy

1) копируем ENV файл
```cp ./.env-example ./.env```
2) вносим необходимые изменения любым удобным вам текстовым редактором, сменить необходимо секретный ключ, пароль пользователя по умолчанию и пароль пользоваьеля БД: ```DJANGO_SECRET_KEY```, ```DJANGO_SUPERUSER_PASSWORD```, ```POSTGRES_PASSWORD```
3) запускаем контейнеры ```docker-compose up -d --build```

Приложение будет запущено по адресу **```http://localhost:8000/```** 

## How To
для простоты и ускорения не стал реализовывать дополнительную авторизацию для методов API, оставил модель управления доступом стандартную django, на саму логику работы приложения это не влияет для тестового варианта, при желании можно будет добавить любой удобный метод авторизации (JWT, например) всего в пару строк

проверить работу API можно через стандартный веб-интерфейс DRF

### для проверки api:

* авторизуйтесь в админке
```/admin```
* откройте ссылку с api
```/api/v1/apps/```

### работа с моделью apps
* создание

POST запрос на ```/api/v1/apps/```

Обязательное поле **appname**

В ответ прилетает сгенерированный ключ API ```api_key```, он не хранится нигде и не может быть отправлен клиенту повторно, клиент самостоятельно хранит ключ и использует его в дальнейшем  

* просмотр (чтение)

GET запрос на ```/api/v1/apps/<appname>```

* изменение 

PUT запрос на ```/api/v1/apps/<appname>```

Обязательное поле **appname** (при PATCH можно отправлять любые поля формы, кроме ключа)

*  удаление

DELETE запрос на ```/api/v1/apps/<appname>```

* сброс API ключа

POST запрос на  ```/api/v1/apps/<appname>/new_key/```

В ответ прилетает сгенерированный ключ API ```api_key```, он не хранится нигде и не может быть отправлен клиенту повторно, клиент самостоятельно хранит ключ и использует его в дальнейшем

### проверка API ключа приложения

GET запрос на ```/api/test/```

**обязательный заголовок:**

"X-Api-Key: * * *"

в ответ прилетает информация по самому приложению, увеличивается счетчик количества запросов и отмечается время обращения (их можно изменить в самой модели)

проверка можно быть реализована с помощью команды:

```curl -H "X-Api-Key: <your_key>" <app_url>/api/test/```